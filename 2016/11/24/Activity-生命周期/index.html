<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Activity 生命周期 | Chandy &#39;s Home | Noob</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta name="theme-color" content="#3F51B5">
  
  
  <meta name="keywords" content="">
  <meta name="description" content="Activity 生命周期Activity的生命周期按照顺序来讲一共可以分为7个：  

onCreate();  
onStart();  
onResume();  
onPause();  
onStop();  
onRestart();  
onDestroy();  

具体的顺序可以看下边的图：接下来就开始结合源码中的文档讲解这些状态：  
onCreate()

Called wh">
<meta property="og:type" content="article">
<meta property="og:title" content="Activity 生命周期">
<meta property="og:url" content="http://yoursite.com/2016/11/24/Activity-生命周期/index.html">
<meta property="og:site_name" content="Chandy 's Home">
<meta property="og:description" content="Activity 生命周期Activity的生命周期按照顺序来讲一共可以分为7个：  

onCreate();  
onStart();  
onResume();  
onPause();  
onStop();  
onRestart();  
onDestroy();  

具体的顺序可以看下边的图：接下来就开始结合源码中的文档讲解这些状态：  
onCreate()

Called wh">
<meta property="og:image" content="http://s16.sinaimg.cn/mw690/71e00b88gda37b3c6040f&690">
<meta property="og:updated_time" content="2016-11-24T17:04:44.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Activity 生命周期">
<meta name="twitter:description" content="Activity 生命周期Activity的生命周期按照顺序来讲一共可以分为7个：  

onCreate();  
onStart();  
onResume();  
onPause();  
onStop();  
onRestart();  
onDestroy();  

具体的顺序可以看下边的图：接下来就开始结合源码中的文档讲解这些状态：  
onCreate()

Called wh">
<meta name="twitter:image" content="http://s16.sinaimg.cn/mw690/71e00b88gda37b3c6040f&690">
  
    <link rel="alternative" href="/atom.xml" title="Chandy &#39;s Home" type="application/atom+xml">
  
  <meta name="summary" content="love IT !">
  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="loading" class="active"></div>

  <nav id="menu" class="hide" >
   <div class="inner flex-row-vertical">
  <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
      <i class="icon icon-lg icon-close"></i>
  </a>
  <div class="brand-wrap">
    <div class="brand">
      <a href="/" class="avatar"><img src="/img/logo.png"></a>
      <hgroup class="introduce">
        <h5 class="nickname">Chandy</h5>
        <a href="mailto:chandy1994@hotmail.com" title="chandy1994@hotmail.com" class="mail">chandy1994@hotmail.com</a>
      </hgroup>
    </div>
  </div>
  <ul class="nav flex-col">
    
        <li class="waves-block waves-effect">
          <a href="/"  >
            <i class="icon icon-lg icon-home"></i>
            主页
          </a>
        </li>
    
        <li class="waves-block waves-effect">
          <a href="/archives"  >
            <i class="icon icon-lg icon-archives"></i>
            Archives
          </a>
        </li>
    
        <li class="waves-block waves-effect">
          <a href="/tags"  >
            <i class="icon icon-lg icon-tags"></i>
            Tags
          </a>
        </li>
    
        <li class="waves-block waves-effect">
          <a href="https://github.com/chandy1994" target="_blank" >
            <i class="icon icon-lg icon-github"></i>
            Github
          </a>
        </li>
    
        <li class="waves-block waves-effect">
          <a href="http://weibo.com/u/5501169492?refer_flag=1001030102_&is_all=1" target="_blank" >
            <i class="icon icon-lg icon-weibo"></i>
            Weibo
          </a>
        </li>
    
        <li class="waves-block waves-effect">
          <a href="/"  >
            <i class="icon icon-lg icon-link"></i>
            测试
          </a>
        </li>
    
  </ul>

  <footer class="footer">
  <p><a rel="license" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0;vertical-align:middle;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAAPCAMAAABEF7i9AAAAllBMVEUAAAD///+rsapERER3d3eIiIjMzMzu7u4iIiKUmZO6v7rKzsoODg4RERFVVVUNDQ0NDg0PEA8zMzNLTEtbXltmZmZydnF9gn2AgICPkI+ZmZmqqqq7u7vFxsXIzMgNDQwZGRkgICAhISEkJSMnKCcuMC4xMzE5Ozk7PTtBQkFCQkJDQ0Nna2eGhoaHh4ezuLLGysbd3d1wVGpAAAAA4UlEQVR42q2T1xqCMAyFk7QsBQeKA9x7j/d/OSm22CpX0nzcpA1/T05aAOuBVkMAScQFHLnEwoCo2f1TnQIGoVMewjZEjVFN4GH1Ue1Cn2jWqwfsOOj6wDwGvotsl/c8lv7KIq1eLOsT0HMFHMIE/RZyHnlphryT9zyV+8WH5e8yQw3wnQvgAFxPTKUVi555SHR/lOfLMgVTeDlSfN+TaoUsiTyeIm+bCkHvCA2FUKG48LDtYBZBknsYP/G8NTw0gaaHyuQf4H5pecrB/FYCT2sL9zAfy1Xyjou6L8X2W7YcLyBZCRtnq/zfAAAAAElFTkSuQmCC" /></a></p>
  <p>Chandy &#39;s Home &copy; 2016</p>
  <p>Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme
  <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a></p>
  <a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-2x icon-rss-square"></i></a>
</footer>

</div>

  </nav>
  <main id="main">
    <header class="header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">Activity 生命周期</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input " autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-share">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header">
  <div class="container">
    <h1 class="author">Activity 生命周期</h1>
    <h5 class="subtitle">
          
            <time datetime="2016-11-24T15:00:22.000Z" itemprop="datePublished" class="page-time">
  2016-11-24
</time>

 
        
    </h5>
  </div>
</header>

    <div class="container body-wrap">
      <article id="post-Activity-生命周期" 
  class="article article-type-post" itemprop="blogPost">
    <div class="post-meat flex-row">
        
    </div>
    <div class="post-body">
        <aside class="post-widget" id="post-widget">

            
            <div class="post-share" id="post-share">
    <div class="tit">分享到：</div>
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" href="javascript:;" data-title="微博" data-service="tsina">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns" href="javascript:;" data-title="微信" data-service="weixin">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" href="javascript:;" data-title=" QQ" data-service="cqq">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" href="javascript:;" data-title=" Facebook" data-service="fb">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" href="javascript:;" data-title=" Twitter" data-service="twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="douban share-sns" href="javascript:;" data-title="豆瓣" data-service="douban">
          豆
        </a>
      </li>
    </ul>
 </div>

            

            
            <nav class="post-toc-wrap" id="post-toc">
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Activity-生命周期"><span class="post-toc-text">Activity 生命周期</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#onCreate"><span class="post-toc-text">onCreate()</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#onStart"><span class="post-toc-text">onStart()</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#onResume"><span class="post-toc-text">onResume()</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#onPause"><span class="post-toc-text">onPause()</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#onStop"><span class="post-toc-text">onStop()</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#onRestart"><span class="post-toc-text">onRestart()</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#onDestroy"><span class="post-toc-text">onDestroy()</span></a></li></ol></li></ol>
            </nav>
            
        </aside>

        <div class="post-main">

            <div class="post-content" id="post-content" itemprop="postContent">
            <h1 id="Activity-生命周期"><a href="#Activity-生命周期" class="headerlink" title="Activity 生命周期"></a>Activity 生命周期</h1><p>Activity的生命周期按照顺序来讲一共可以分为7个：  </p>
<ul>
<li>onCreate();  </li>
<li>onStart();  </li>
<li>onResume();  </li>
<li>onPause();  </li>
<li>onStop();  </li>
<li>onRestart();  </li>
<li>onDestroy();  </li>
</ul>
<p>具体的顺序可以看下边的图：<br><img src="http://s16.sinaimg.cn/mw690/71e00b88gda37b3c6040f&amp;690" alt="baidu"><br>接下来就开始结合源码中的文档讲解这些状态：  </p>
<h2 id="onCreate"><a href="#onCreate" class="headerlink" title="onCreate()"></a>onCreate()</h2><blockquote>
<ul>
<li>Called when the activity is first created. This is where you should do all of your normal static set up: create views, bind data to lists, etc.  This method also provides you with a Bundle containing the activity’s previously frozen state, if there was one.Always followed by onStart()</li>
<li>You can call {@link #finish} from within this function, in which case onDestroy() will be immediately called without any of the rest of the activity lifecycle ({@link #onStart}, {@link #onResume},{@link #onPause}, etc) executing.   </li>
</ul>
</blockquote>
<p>onCreate()方法是当Activity启动后第一个调用的方法，这时候的Activity还是不可见的，这点很重要，根据文档中的内容提示，这个方法就是用来setContentView()，findViewById()，对一些静态数据块的处理还有绑定数据的。 当然你也可以在这个方法当中调用finish()可以不经过其他的生命周期直接onDestroy()。 </p>
<h2 id="onStart"><a href="#onStart" class="headerlink" title="onStart()"></a>onStart()</h2><blockquote>
<ul>
<li>Called when the activity is becoming visible to the user.  </li>
<li>Called after {@link #onCreate} ; or after {@link #onRestart} when the activity had been stopped, but is now again being displayed to the user.  It will be followed by {@link #onResume}.</li>
</ul>
</blockquote>
<p>这个好像没什么好说的了，就是当界面变为可见的时候，就会调用这个方法，进入onStart状态。  </p>
<p><em>PS.可见与可见是不同的。这里说的可见是activity可见，并不是说view都绘制好了，如果你想从这里取走view的宽高，尝试之后你只能呵呵了。<br>如果非要获取的话，你可以从 onWindowFocusChanged()下手试试。</em></p>
<h2 id="onResume"><a href="#onResume" class="headerlink" title="onResume()"></a>onResume()</h2><blockquote>
<ul>
<li>Called when the activity will start interacting with the user.  At this point your activity is at the top of the activity stack, with user input going to it. Always followed by onPause().</li>
<li>Called after {@link #onRestoreInstanceState}, {@link #onRestart}, or {@link #onPause}, for your activity to start interacting with the user. This is a good place to begin animations, open exclusive-access devices (such as the camera), etc.</li>
<li>Keep in mind that onResume is not the best indicator that your activity is visible to the user; a system window such as the keyguard may be in front.  Use {@link #onWindowFocusChanged} to know for certain that your activity is visible to the user (for example, to resume a game).  </li>
</ul>
</blockquote>
<p>这几段话看起来挺长的，但是核心思想特别简单，就是说你当前的这个Activity已经在系统的ActivityManager的栈顶了！你现在可以和他随意的交互了（动画等）。<strong>但是请注意！请注意！请注意！重要的说三遍：虽然在onResume()中可以交互了，但是并不意味只要调用onResume()就变味可以交互了，其实是最终是需要看onWindowFocusChanged的。</strong> </p>
<h2 id="onPause"><a href="#onPause" class="headerlink" title="onPause()"></a>onPause()</h2><blockquote>
<ul>
<li>Called when the system is about to start resuming a previous activity.  This is typically used to commit unsaved changes to persistent data, stop animations and other things that may be consuming CPU, etc.  Implementations of this method must be very quick because the next activity will not be resumed until this method returns.  Followed by either onResume() returns back to the front, or onStop() if it becomes invisible to the user. </li>
<li>it is important to save persistent data in {@link #onPause} instead of {@link #onSaveInstanceState} because the latter is not part of the lifecycle callbacks</li>
<li>When an activity’s onPause() method is called, it should commit to the backing content provider or file any changes the user has made.  This ensures that those changes will be seen by any other activity that is about to run.  You will probably want to commit your data even more aggressively at key times during your activity’s lifecycle: for example before starting a new activity, before finishing your own activity, when the user switches between input fields, etc.</li>
<li>When activity B is launched in front of activity A, this callback will be invoked on A.  B will not be created until A’s {@link #onPause} returns, so be sure to not do anything lengthy here.</li>
<li>Called as part of the activity lifecycle when an activity is going into the background, but has not (yet) been killed. After receiving this call you will usually receive a following call to {@link #onStop} (after the next activity has been resumed and displayed), however in some cases there will be a direct call back to {@link #onResume} without going through the stopped state.  </li>
</ul>
</blockquote>
<p>在我看来啊，我觉得在整个Activity当中，最终要的流程，或者说最关键，要最小心的可能就是这个onPause()了，为什么这么说？仔细阅读上边的说明，你会得到一些信息：这个流程是当当前Activty为其他Activity进入活动状态时让步，所进入的第一个状态，在这个状态中，他需要储存当前Activity的一些关键信息（用文件，provider等），为其他Activity做一些贡献，当然，最关键的一点是这个时间不可以太长，为什么？<strong>因为当ActivityA要启动ActivityB的时候如果A一直在onPause()状态的话，B是无法进入到onCreate()当中的 - -！ </strong>这就是为什么不要进行耗时的操作，越简单越好。</p>
<h2 id="onStop"><a href="#onStop" class="headerlink" title="onStop()"></a>onStop()</h2><blockquote>
<ul>
<li>Called when the activity is no longer visible to the user, because another activity has been resumed and is covering this one.  This may happen either because a new activity is being started, an existing one is being brought in front of this one, or this one is being destroyed. Followed by either onRestart() if this activity is coming back to interact with the user, or onDestroy() if this activity is going away.</li>
<li>Called when you are no longer visible to the user.  You will next receive either {@link #onRestart}, {@link #onDestroy}, or nothing, depending on later user activity. Note that this method may never be called, in low memory situations where the system does not have enough memory to keep your activity’s process running after its {@link #onPause} method is called.  </li>
</ul>
</blockquote>
<p>这个状态仔细看一下，其实也没什么难的，就是说当一个activity不再对用户可见的时候，就会先onPause(),接着运行onStop(),每当有Activity被另一个遮盖的时候就会发生.</p>
<h2 id="onRestart"><a href="#onRestart" class="headerlink" title="onRestart()"></a>onRestart()</h2><blockquote>
<ul>
<li>Called after your activity has been stopped, prior to it being started again. Always followed by onStart().</li>
<li>Called after {@link #onStop} when the current activity is being re-displayed to the user (the user has navigated back to it).  It will be followed by {@link #onStart} and then {@link #onResume}.  </li>
</ul>
</blockquote>
<p>这个状态更简单，就是一个已经onStart()过后的Activity，被onStop()之后，他的信息还存在，从其他Activity回来时，ActivityManager中会退栈（以后会说明）前一个Activity，<strong>就会调用onRestart()接着onStart()(可见)，后onResume()(可交互)。</strong></p>
<h2 id="onDestroy"><a href="#onDestroy" class="headerlink" title="onDestroy()"></a>onDestroy()</h2><blockquote>
<ul>
<li>The final call you receive before your activity is destroyed.  This can happen either because the activity is finishing (someone called {@link Activity#finish} on it, or because the system is temporarily destroying this instance of the activity to save space.  You can distinguish between these two scenarios with the {@link Activity#isFinishing} method.</li>
<li>Perform any final cleanup before an activity is destroyed.  This can happen either because the activity is finishing (someone called {@link #finish} on it, or because the system is temporarily destroying this instance of the activity to save space.  You can distinguish between these two scenarios with the {@link #isFinishing} method.</li>
<li>Note: do not count on this method being called as a place for saving data! </li>
<li>A new instance of the activity will <em>always</em> be immediately created after this one’s {@link #onDestroy()} is called.  In particular, no messages will be dispatched during this time (when the returned object does not have an activity to be associated with).  </li>
</ul>
</blockquote>
<p>写了这么多，终于到了Activity生命周期中最最后一步了！其实她的使命，就是释放掉资源和内存，切记不要将要储存的信息写在这一步，要写在onPause()里面，最后说明一点就是：当一个Activity被destroy之后会有一个新的Activity立马被Create，而在此期间会停止消息的分发。  </p>
<p><strong>生命周期的东西基本就是这些，也就是把该做的工作写在相应的函数当中，完成它们相应的使命，就ok了！</strong></p>

            <blockquote>
                <p>
                本文地址：
                <a href="http://yoursite.com/2016/11/24/Activity-生命周期/" target="_blank" rel="external">http://yoursite.com/2016/11/24/Activity-生命周期/</a>
                </p>
                <footer><cite><a href="http://yoursite.com">@Chandy 's Home</a></cite></footer>
            </blockquote>
            </div>
            
<nav class="post-nav">
  

  
    <div class="waves-block waves-effect next fr">
      <a href="/2016/11/03/hello-android/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">Hello Android</h4>
      </a>
    </div>
  
</nav>


            
            
<div class="duoshuo">
	<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="Activity-生命周期" data-title="Activity 生命周期" data-url="http://yoursite.com/2016/11/24/Activity-生命周期/index.html"></div>
	<!-- 多说评论框 end -->
	<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"ysblog"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- 多说公共JS代码 end -->
</div>





        </div>
    </div>
</article>
    </div>
  </main>
<div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>

<script>
var BLOG_SHARE = {
    title: "Activity 生命周期",
    pic: "/img/logo.png",
    summary: document.getElementsByName('summary')[0].content,
    url: "http://yoursite.com/2016/11/24/Activity-生命周期/index.html"
};
</script>
<div class="global-share" id="global-share">
    <div class="tit">分享到：</div>
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" href="javascript:;" data-title="微博" data-service="tsina">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns" href="javascript:;" data-title="微信" data-service="weixin">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" href="javascript:;" data-title=" QQ" data-service="cqq">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" href="javascript:;" data-title=" Facebook" data-service="fb">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" href="javascript:;" data-title=" Twitter" data-service="twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="douban share-sns" href="javascript:;" data-title="豆瓣" data-service="douban">
          豆
        </a>
      </li>
    </ul>
 </div>



<script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>

<script src="/js/main.js"></script>



<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<script type="text/template" id="search-tpl">
<li class="item">
    <a href="/{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</script>

<script src="/js/search.js"></script>









</body>
</html>
